function removeDomainFromUrl(e){"use strict";return e}var IMG_PARAM={URL:0,TITLE:1,ALT:2,WIDTH:3,HEIGHT:4},pluginPath=removeDomainFromUrl(CKEDITOR.plugins.get("slideshow").path),BASE_PATH=removeDomainFromUrl(CKEDITOR.basePath),SCRIPT_JQUERY=pluginPath+"3rdParty/jquery.min.js",SCRIPT_ADDGAL=pluginPath+"3rdParty/ad-gallery/jquery.ad-gallery.min.js",CSS_ADDGAL=pluginPath+"3rdParty/ad-gallery/jquery.ad-gallery.css",SCRIPT_FANCYBOX=pluginPath+"3rdParty/fancybox2/jquery.fancybox.pack.js?v=2.1.5",CSS_FANCYBOX=pluginPath+"3rdParty/fancybox2/jquery.fancybox.css?v=2.1.5";function var_dump(e,t){"use strict";var i="";t||(t=0);var s,n,a,l="";for(s=0;s<t+1;s+=1)l+="    ";if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&("object"==typeof(a=e[n])?(i+=l+"'"+n+"' ...\n",i+=var_dump(a,t+1)):i+=l+"'"+n+"' => \""+a+'"\n');else i="===>"+e+"<===("+typeof e+")";return i}var listItem=function(e){"use strict";return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")},ULItem=function(e){"use strict";return e.type==CKEDITOR.NODE_ELEMENT&&e.is("ul")},iFrameItem=function(e){"use strict";return e.type==CKEDITOR.NODE_ELEMENT&&e.is("iframe")};Array.prototype.pushUnique=function(e){"use strict";var t;for(t=0;t<this.length;t+=1)if(this[t][0]==e[0])return-1;return this.push(e),this.length-1},Array.prototype.updateVal=function(e,t){"use strict";var i;for(i=0;i<this.length;i+=1)if(this[i][0]==e)return this[i]=[e,t],!0;return this[i]=[e,t],!1},Array.prototype.getVal=function(e){"use strict";var t;for(t=0;t<this.length;t+=1)if(this[t][0]==e)return this[t][1];return null},CKEDITOR.dialog.add("slideshowDialog",function(e){"use strict";var t=e.lang.slideshow;function i(e,t,i,s,n){var a;return e=l(e),a=s?s.createElement("OPTION"):document.createElement("OPTION"),!(!e||!a||"option"!=a.getName())&&(CKEDITOR.env.ie?(isNaN(parseInt(n,10))?e.$.options.add(a.$):e.$.options.add(a.$,n),a.$.innerHTML=t.length>0?t:"",a.$.value=i):(null!==n&&n<e.getChildCount()?e.getChild(n<0?0:n).insertBeforeMe(a):e.append(a),a.setText(t.length>0?t:""),a.setValue(i)),a)}function s(e,t,s,r){var o=n(e=l(e));if(o<0)return!1;var d=o+t;if(o==(d=(d=d<0?0:d)>=e.getChildCount()?e.getChildCount()-1:d))return!1;var c=/(^IMG_\d+)/,g=e.getChild(d),h=g.getText(),u=g.getValue();(function(e,t,i,s){if(e=l(e),t<0)return!1;var n=e.getChild(t);n.setText(i),n.setValue(s)})(e,d,h=h.replace(c,"IMG_"+o),u),h=(g=e.getChild(o)).getText(),u=g.getValue(),g.remove(),g=i(e,h=h.replace(c,"IMG_"+d),u,s||null,d),a(e,d);var p=r.imagesList[o],m=r.imagesList[d];return r.imagesList[o]=m,r.imagesList[d]=p,g}function n(e){return(e=l(e))?e.$.selectedIndex:-1}function a(e,t){if(e=l(e),t<0)return null;var i=e.getChildren().count();return e.$.selectedIndex=t>=i?i-1:t,e}function l(e){return e&&e.domId&&e.getInputElement().$?e.getInputElement():!(!e||!e.$)&&e}function r(e){1!=e.openCloseStep&&(e.getContentElement("slideshowinfoid","framepreviewid").isVisible()?f(e):c(e))}function o(e){return n(e.getContentElement("slideshowinfoid","imglistitemsid"))}function d(e){!function(e){var t=BASE_PATH+"plugins/slideshow/images/placeholder.png";if(1==e.imagesList.length&&e.imagesList[0][IMG_PARAM.URL]==t){var i=e.getContentElement("slideshowinfoid","imglistitemsid");i=l(i),e.imagesList.splice(0,1),i.getChild(0).remove()}}(e);var t=e.previewImage,s=t.$.src,n=t.$.width/t.$.height,o=50,d=50;n>1?d/=n:o*=n;var c=e.getContentElement("slideshowinfoid","imglistitemsid"),g=e.imagesList.pushUnique([s,"","",o.toFixed(0),d.toFixed(0)]);g>=0&&(i(c,"IMG_"+g+" : "+s.substring(s.lastIndexOf("/")+1),s,e.getParentEditor().document),a(c,g),r(e))}function c(e){var t=e.getContentElement("slideshowinfoid","imglistitemsid"),i=n(t),s=e.imagesList[i];(t=l(t=e.getContentElement("slideshowinfoid","imgtitleid"))).setValue(s[1]),(t=l(t=e.getContentElement("slideshowinfoid","imgdescid"))).setValue(s[2]),t=l(t=e.getContentElement("slideshowinfoid","imgpreviewid"));var a='<div style="text-align:center;"> <img src="'+s[0]+'" title="'+s[1]+'" alt="'+s[2]+'" style=" max-height: 200px;  max-width: 350px;"> </div>';t.setHtml(a);var r=e.getContentElement("slideshowinfoid","framepreviewid"),o=e.getContentElement("slideshowinfoid","imgparamsid");(r=l(r)).hide(),(o=l(o)).show()}function g(e,t){var i=e.getContentElement("slideshowinfoid","imglistitemsid"),a=n(i=l(i));1!=i.getChildren().count()&&(-1==t&&0==a||1==t&&a==i.getChildren().count()-1||(s(i,t,e.getParentEditor().document,e),b(e)))}var h=function(){var e=this.previewImage;e.removeListener("load",h),e.removeListener("error",u),e.removeListener("abort",u),d(this)},u=function(){var e=this.previewImage;e.removeListener("load",h),e.removeListener("error",u),e.removeListener("abort",u)};function p(e,t){e.imagesList[o(e)][IMG_PARAM.TITLE]=t,c(e)}function m(e,t){e.imagesList[o(e)][IMG_PARAM.ALT]=t,c(e)}function f(e){var t=e.getContentElement("slideshowinfoid","framepreviewid"),i=e.getContentElement("slideshowinfoid","imgparamsid");(i=l(i)).hide(),(t=l(t)).show(),b(e)}function b(e){var t=300;if(1==e.params.getVal("showthumbid")?t-=120:1==e.params.getVal("showcontrolid")&&(t-=30),0!=e.imagesList.length){var i=e.getContentElement("slideshowinfoid","imglistitemsid"),s=n(i);s<0&&(s=0),i=e.getContentElement("slideshowinfoid","framepreviewid");var a="";a+="<head>",a+='<script src="'+SCRIPT_JQUERY+'" type="text/javascript"><\/script>',a+='<script type="text/javascript" src="'+SCRIPT_ADDGAL+'"><\/script>',a+='<link rel="stylesheet" type="text/css" href="'+CSS_ADDGAL+'" />',1==e.params.getVal("openOnClickId")&&(a+='<link rel="stylesheet" type="text/css" href="'+CSS_FANCYBOX+'" />',a+='<script type="text/javascript" src="'+SCRIPT_FANCYBOX+'"><\/script>',a+='<script type="text/javascript">',a+=I(e),a+="<\/script>"),a+='<script type="text/javascript">',a+=x(e,s,436,t),a+="<\/script>",a+="</head>",a+="<body>";var r=A(e);a+=r.getOuterHtml(),a+="</body>",a+="";var o=(i=l(i)).getFirst(iFrameItem);o&&o.remove();var d=null,c=t;1==e.params.getVal("showthumbid")?c+=120:1==e.params.getVal("showcontrolid")&&(c+=30);var g=CKEDITOR.dom.element.createFromHtml('<iframe style="width:496px;height:'+c+'px;background:azure; " class="cke_pasteframe" frameborder="10"  allowTransparency="false" role="region" scrolling="no"></iframe>');g.setAttribute("name","totoFrame"),g.setAttribute("id","totoFrame"),g.on("load",function(e){var t,i,s;null==d&&((d=this.$).contentDocument?t=d.contentDocument:d.contentWindow&&(t=d.contentWindow.document),t?(s=a,(i=t).open(),i.writeln(s),i.close()):alert("Cannot inject dynamic contents into iframe."))}),i.append(g)}}function v(){var e=this.getDialog();if(e.newSlideShowMode)e.slideshowDOM.setAttribute("data-"+this.id,this.getValue()),this.type;else switch(this.type){case"checkbox":this.setValue("true"==e.slideshowDOM.getAttribute("data-"+this.id));break;case"text":case"select":this.setValue(e.slideshowDOM.getAttribute("data-"+this.id))}}function y(){var e=this.getDialog();e.params.updateVal(this.id,this.getValue()),this.type,r(e)}function w(e){e.previewImage&&(e.previewImage.removeListener("load",h),e.previewImage.removeListener("error",u),e.previewImage.removeListener("abort",u),e.previewImage.remove(),e.previewImage=null),e.imagesList=null,e.params=null,e.slideshowDOM=null,function(e){for(e=l(e);e.getChild(0)&&e.getChild(0).remove(););}(e.getContentElement("slideshowinfoid","imglistitemsid")),e.openCloseStep=!1}var C=function(e){return"cke_"+function(e){for(var t="";t.length<e;)t+=Math.random().toString(36).substring(2);return t.substring(0,e)}(8)+"_"+e};function x(e,i,s,n){var a="ad-gallery_"+e.params.getVal("slideshowid"),l="(function($) {",r="";return l+="$(function() {",0==n&&(n=e.params.getVal("pictheightid")),0==s&&(s="false"),0==e.params.getVal("showtitleid")&&(r=",  hooks: { displayDescription: function(image) {}}"),l+="   var galleries = $('#"+a+"').adGallery({"+("loader_image: '"+pluginPath+"3rdParty/ad-gallery/loader.gif', width:"+s+", height:"+n+", start_at_index: "+i+", animation_speed: "+e.params.getVal("animspeedid")+r+", update_window_hash: false, effect: '"+e.params.getVal("transitiontypeid")+"',")+(" slideshow: { enable: true, autostart: "+e.params.getVal("autostartid")+", start_label: '"+t.labelStart+"', stop_label: '"+t.labelStop+"', speed: "+1e3*e.params.getVal("speedid")+"}")+"});",l+="});",l+="})(jQuery);"}function I(e){var t="(function($) {";return t+="$(function() {",t+='$("#'+("ad-gallery_"+e.params.getVal("slideshowid"))+'").on("click",".ad-image",function(){',t+='var imgObj =$(this).find("img");',t+='var isrc=imgObj.attr("src");',t+="var ititle=null;",t+="var idesc=null;",t+="var iname=isrc.split('/');",t+="iname=iname[iname.length-1];",t+='var imgdescid=$(this).find(".ad-image-description");',t+="if(imgdescid){",t+='ititle=$(this).find(".ad-description-title");',t+="if(ititle)ititle=ititle.text();",t+="if(ititle!='')ititle='<big>'+ititle+'</big>';",t+='idesc=$(this).find("span");',t+="if(idesc)idesc=idesc.text();",t+="if (idesc.indexOf('IMAGE_LINK_') >= 0) {",t+="idesc = '';",t+="}",t+="if(idesc!=''){",t+="if(ititle!='')ititle=ititle+'<br>';",t+="idesc='<i>'+idesc+'</i>';",t+="}",t+="}",t+="$.fancybox.open({",t+="href:isrc,",t+="beforeLoad:function(){",t+="this.title=ititle+idesc;",t+="},",t+="});",t+="});",t+="});",t+="})(jQuery);"}function A(t){var i=t.params.getVal("slideshowid"),s="ad-gallery_"+i,n="display: block;",a="display: block;";0==t.params.getVal("showthumbid")&&(n="display: none;"),0==t.params.getVal("showcontrolid")&&(a="visibility: hidden;");var l=e.document.createElement("div");l.setAttribute("id",i),l.setAttribute("class","slideshowPlugin"),l.setAttribute("contenteditable","false");var r=l.append("div");r.setAttribute("class","ad-gallery"),r.setAttribute("contenteditable","false"),r.setAttribute("id",s);var o=r.append("div");o.setAttribute("class","ad-image-wrapper"),o.setAttribute("contenteditable","false");var d=r.append("div");d.setAttribute("class","ad-controls"),d.setAttribute("contenteditable","false"),d.setAttribute("style",a);var c=r.append("div");c.setAttribute("class","ad-nav"),c.setAttribute("style",n),c.setAttribute("contenteditable","false");var g=c.append("div");g.setAttribute("class","ad-thumbs"),g.setAttribute("contenteditable","false");var h=g.append("ul");return h.setAttribute("class","ad-thumb-list"),h.setAttribute("contenteditable","false"),function(e,t){var i,s,n,a;for(i=0;i<e.imagesList.length;i+=1)(s=t.append("li")).setAttribute("contenteditable","false"),(n=s.append("a")).setAttribute("href",removeDomainFromUrl(e.imagesList[i][IMG_PARAM.URL])),n.setAttribute("contenteditable","false"),(a=n.append("img")).setAttribute("src",removeDomainFromUrl(e.imagesList[i][IMG_PARAM.URL])),a.setAttribute("title",e.imagesList[i][IMG_PARAM.TITLE]),a.setAttribute("alt",e.imagesList[i][IMG_PARAM.ALT]),a.setAttribute("contenteditable","false"),a.setAttribute("width",e.imagesList[i][IMG_PARAM.WIDTH]),a.setAttribute("height",e.imagesList[i][IMG_PARAM.HEIGHT])}(t,h),l}return{title:t.dialogTitle,width:500,height:600,resizable:CKEDITOR.DIALOG_RESIZE_NONE,buttons:[CKEDITOR.dialog.okButton(e,{label:"OkCK",style:"display:none;"}),CKEDITOR.dialog.cancelButton,{id:"myokbtnid",type:"button",label:"OK",title:t.validModif,accessKey:"C",disabled:!1,onClick:function(){!function(t){var i={};t.openCloseStep=!0,t.commitContent(t);var s,n=A(t);for(s=0;s<t.params.length;s+=1)n.data(t.params[s][0],t.params[s][1]);if(!e.config.slideshowDoNotLoadJquery||1!=e.config.slideshowDoNotLoadJquery){var a=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:SCRIPT_JQUERY}});n.append(a)}var l=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:SCRIPT_ADDGAL}});if(n.append(l),1==t.params.getVal("openOnClickId")){if(!e.config.slideshowDoNotLoadFancyBoxCss||1!=e.config.slideshowDoNotLoadFancyBoxCss){var r=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});r.setText("(function($) { $('head').append('<link rel=\"stylesheet\" href=\""+CSS_FANCYBOX+'" type="text/css" />\'); })(jQuery);'),n.append(r)}if(!e.config.slideshowDoNotLoadFancyBoxScript||1!=e.config.slideshowDoNotLoadFancyBoxScript){var o=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:SCRIPT_FANCYBOX}});n.append(o)}var d=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});d.setText(I(t)),n.append(d)}var c,g=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});g.setText((c="(function($) {",c+="$(function() {",c+='$("#ad-gallery_'+t.params.getVal("slideshowid")+'").on("click",".ad-image",function(){',c+='var imgObj =$(this).find("img");',c+='var isrc=imgObj.attr("src");',c+="var ititle=null;",c+="var idesc=null;",c+="var iname=isrc.split('/');",c+="iname=iname[iname.length-1];",c+='var imgdescid=$(this).find(".ad-image-description");',c+="if(imgdescid){",c+='ititle=$(this).find(".ad-description-title");',c+="if(ititle)ititle=ititle.text();",c+='idesc=$(this).find("span");',c+="if(idesc)idesc=idesc.text();",c+="if(idesc!=''){",c+="var url=window.location.href.trim();",c+="if (idesc.indexOf('IMAGE_LINK_TAB:') >= 0) {",c+="\tidesc = idesc.substring(15).trim();",c+=" if (url != idesc) window.open(idesc,'_blank');",c+="} else if (idesc.indexOf('IMAGE_LINK_PAR:') >= 0) {",c+="\tidesc = idesc.substring(15).trim();",c+=" if (url != idesc) window.open(idesc,'_self');",c+="}",c+="}",c+="}",c+="});",c+="});",c+="})(jQuery);")),n.append(g);var h=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});h.setText("(function($) { $('head').append('<link rel=\"stylesheet\" href=\""+CSS_ADDGAL+'" type="text/css" />\'); })(jQuery);'),n.append(h);var u=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});u.setText(x(t,0,0,0)),n.append(u),t.imagesList.length&&(i.backgroundImage='url("'+t.imagesList[0][IMG_PARAM.URL]+'")'),i.backgroundSize="contain",i.backgroundRepeat="no-repeat",i.backgroundPosition="center",i.display="block",i.width="64px",i.height="64px",i.border="1px solid black";var p=e.createFakeElement(n,"cke_slideShow","slideShow",!1);p.setAttributes({}),p.setStyles(i),t.fakeImage?(p.replace(t.fakeImage),e.getSelection().selectElement(p)):e.insertElement(p),w(t),t.hide()}(this.getDialog())}}],contents:[{id:"slideshowinfoid",label:"Basic Settings",align:"center",elements:[{type:"text",id:"id",style:"display:none;",onLoad:function(){this.getInputElement().setAttribute("readOnly",!0)}},{type:"text",id:"txturlid",style:"display:none;",label:t.imgList,onChange:function(){var e=this.getDialog(),t=this.getValue();if(t.length>0){var i=e.previewImage;i.on("load",h,e),i.on("error",u,e),i.on("abort",u,e),i.setAttribute("src",t)}}},{type:"button",id:"browse",hidden:"true",style:"display:inline-block;margin-top:0px;",filebrowser:{action:"Browse",target:"slideshowinfoid:txturlid",url:e.config.filebrowserImageBrowseUrl||e.config.filebrowserBrowseUrl},label:t.imgAdd},{type:"vbox",align:"center",children:[{type:"html",align:"center",id:"framepreviewtitleid",style:"font-family: Amaranth; color: #1E66EB;\tfont-size: 20px; font-weight: bold;",html:t.previewMode},{type:"html",id:"framepreviewid",align:"center",style:"width:500px;height:320px",html:""},{type:"hbox",id:"imgparamsid",style:"display:none;width:500px;",height:"325px",children:[{type:"vbox",align:"center",width:"400px",children:[{type:"text",id:"imgtitleid",label:t.imgTitle,onChange:function(){p(this.getDialog(),this.getValue())},onBlur:function(){p(this.getDialog(),this.getValue())}},{type:"text",id:"imgdescid",label:t.imgDesc,onChange:function(){m(this.getDialog(),this.getValue())},onBlur:function(){m(this.getDialog(),this.getValue())}},{type:"html",id:"imgpreviewid",style:"width:400px;height:200px;",html:"<div>xx</div>"}]}]},{type:"hbox",align:"center",height:110,widths:["25%","50%"],children:[{type:"vbox",children:[{type:"checkbox",id:"autostartid",label:t.autoStart,default:"checked",style:"margin-top:15px;",onChange:y,commit:y,setup:v},{type:"checkbox",id:"showtitleid",label:t.showTitle,default:"checked",onChange:y,commit:y,setup:v},{type:"checkbox",id:"showcontrolid",label:t.showControls,default:"checked",onChange:y,commit:y,setup:v},{type:"checkbox",id:"showthumbid",label:t.showThumbs,default:"checked",onChange:y,commit:y,setup:v},{type:"checkbox",id:"openOnClickId",label:t.openOnClick,default:"checked",onChange:y,commit:y,setup:v}]},{type:"select",id:"imglistitemsid",label:t.picturesList,multiple:!1,style:"height:125px;width:250px",items:[],onChange:function(e){!function(e){var t=e.getDialog();e=l(e);var i,s=0;for(i=0;i<e.getChildren().count();i+=1)if(e.getChild(i).$.selected){s=i;break}a(e,s),r(t)}(this)}},{type:"vbox",children:[{type:"button",id:"previewbtn",style:"margin-top:15px;margin-left:25px;",label:t.previewMode,onClick:function(){f(this.getDialog())}},{type:"button",id:"removeselectedbtn",style:"margin-left:25px;",label:t.imgDelete,onClick:function(){!function(e){var s,n=e.getContentElement("slideshowinfoid","imglistitemsid"),o=!1;for(s=(n=l(n)).getChildren().count()-1;s>=0;s--)n.getChild(s).$.selected&&(e.imagesList.splice(s,1),n.getChild(s).remove(),o=!0);if(o){if(0==e.imagesList.length){var d=BASE_PATH+"plugins/slideshow/images/placeholder.png";i(n,"IMG_0 : "+d.substring(d.lastIndexOf("/")+1),d,e.getParentEditor().document),e.imagesList.pushUnique([d,t.imgTitle,t.imgDesc,"50","50"])}a(n,0),r(e)}}(this.getDialog())}},{type:"button",id:"editselectedbtn",style:"margin-left:25px;",label:t.imgEdit,onClick:function(){c(this.getDialog())}},{type:"hbox",children:[{type:"button",id:"upselectedbtn",style:"width:32px; margin-left:25px;",label:t.arrowUp,onClick:function(){g(this.getDialog(),-1)}},{type:"button",id:"downselectedbtn",style:"width:32px;",label:t.arrowDown,onClick:function(){g(this.getDialog(),1)}}]}]}]},{type:"hbox",children:[{type:"text",id:"pictheightid",label:t.pictHeight,maxLength:3,style:"width:100px;",default:"300",onChange:function(e){0==/^\d+$/.test(this.getValue())&&this.setValue(300),this.getDialog().params.updateVal(this.id,this.getValue()),r(this.getDialog())},commit:y,setup:v},{type:"text",id:"speedid",label:t.displayTime,maxLength:3,style:"width:100px;",default:"5",onChange:function(e){0==/^\d+$/.test(this.getValue())&&this.setValue(5),this.getDialog().params.updateVal(this.id,this.getValue()),r(this.getDialog())},commit:y,setup:v},{type:"text",id:"animspeedid",label:t.transitionTime,style:"width:100px;",maxLength:4,default:"500",onChange:function(e){0==/^\d+$/.test(this.getValue())&&this.setValue(500),this.getDialog().params.updateVal(this.id,this.getValue()),r(this.getDialog())},commit:y,setup:v},{type:"select",id:"transitiontypeid",label:t.transition,items:[[t.tr1,"none"],[t.tr2,"resize"],[t.tr3,"slide-vert"],[t.tr4,"slide-hori"],[t.tr5,"fade"]],default:"resize",style:"width:100px;",commit:y,setup:v,onChange:y}]}]}]}],onLoad:function(){},onShow:function(){this.dialog=this,this.slideshowDOM=null,this.openCloseStep=!0,this.fakeImage=null;var s=null;this.imagesList=[],this.params=[],this.previewImage=e.document.createElement("img"),this.okRefresh=!0;var n,l,o,d,c=this.getSelectedElement();if(c&&c.data("cke-real-element-type")&&"slideShow"==c.data("cke-real-element-type")&&(this.fakeImage=c,s=e.restoreRealElement(c)),s){this.slideshowDOM=s;var g=null==(n=s.getElementsByTag("ul"))?null:1==n.count()?n.getItem(0):null;if(null==g)return alert("BIG Problem slideShowContainer !!"),!1;var h=s.getAttribute("id");if(null==h)return alert("BIG Problem slideshowid !!"),!1;this.params.push(["slideshowid",h]),function(e,t){var s,n,l,o,d,c,g,h,u,p=t.$.getElementsByTagName("img"),m=e.getContentElement("slideshowinfoid","imglistitemsid");for(s=0;s<p.length;s+=1)l=(n=p[s]).src,0==(o=n.width)&&(o=n.naturalWidth),0==o?(o=50,d=50):(0==(d=n.height)&&(d=n.naturalHeight),0==d&&(o=50,d=50)),g=50,h=50,(c=o/d)>1?h/=c:g*=c,(u=e.imagesList.pushUnique([l,n.title,n.alt,g,h]))>=0&&i(m,"IMG_"+u+" : "+l.substring(l.lastIndexOf("/")+1),l,e.getParentEditor().document);a(m,0),r(e)}(this,g);var u,p=s.$.dataset;for(u in p)this.params.push([u,p[u]]);this.setupContent(this,!0),this.newSlideShowMode=!1}else this.params.push(["slideshowid",C("slideShow")]),i(o=(l=this).getContentElement("slideshowinfoid","imglistitemsid"),"IMG_0 : "+(d=BASE_PATH+"plugins/slideshow/images/placeholder.png").substring(d.lastIndexOf("/")+1),d,l.getParentEditor().document),l.imagesList.pushUnique([d,t.imgTitle,t.imgDesc,"50","50"]),a(o,0),r(l),this.commitContent(this);this.openCloseStep=!1,f(this)},onOk:function(){return!1},onHide:function(){w(this)}}});